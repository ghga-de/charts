parameters:
  default:
    auth_key: null
    work_package_signing_key: null
    kafka_servers:
    - kafka-dev:9092

mapping:
  enabled: true
  hostname: data.ghga-dev.de
  prefix: /api/wps/

podAnnotations:
  vault.hashicorp.com/agent-inject: "true"
  vault.hashicorp.com/agent-init-first: "true"
  vault.hashicorp.com/tls-skip-verify: "true"
  vault.hashicorp.com/agent-pre-populate-only: "true"
  vault.hashicorp.com/agent-run-as-same-user: "true"
  vault.hashicorp.com/role: "work-package-role"
  vault.hashicorp.com/agent-inject-secret-db: "secret/data/wps"
  vault.hashicorp.com/agent-inject-template-db: |
    {{ with secret "secret/data/wps" -}}
    export WPS_DB_CONNECTION_STR="{{ .Data.data.DB_CONNECTION_STR }}"
    {{- end }}
  vault.hashicorp.com/agent-inject-secret-auth-keys: "secret/data/auth/pub/int"
  vault.hashicorp.com/agent-inject-template-auth-keys: |
    {{ with secret "secret/data/auth/pub/int" -}}
    export WPS_AUTH_KEY='{{ .Data.data.data }}'
    {{- end }}
  vault.hashicorp.com/agent-inject-secret-wps-keys: "secret/data/auth/priv/wps"
  vault.hashicorp.com/agent-inject-template-wps-keys: |
    {{ with secret "secret/data/auth/priv/wps" -}}
    export WPS_WORK_PACKAGE_SIGNING_KEY='{{ .Data.data.data }}'
    {{- end }}
